(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{680:function(s,a,t){"use strict";t.r(a);var e=t(6),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[TOC]")]),s._v(" "),t("h1",{attrs:{id:"webpack教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack教程"}},[s._v("#")]),s._v(" webpack教程")]),s._v(" "),t("h2",{attrs:{id:"webpack是什么-√"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack是什么-√"}},[s._v("#")]),s._v(" webpack是什么 √")]),s._v(" "),t("p",[s._v("webpack是一个现代的js应用程序的静态(资源)模块打包工具")]),s._v(" "),t("h2",{attrs:{id:"webpack的出现-√"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的出现-√"}},[s._v("#")]),s._v(" webpack的出现 √")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635823689968.png",alt:"1635823689968"}})]),s._v(" "),t("h3",{attrs:{id:"为什么需要打包-√"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要打包-√"}},[s._v("#")]),s._v(" 为什么需要打包? √")]),s._v(" "),t("p",[s._v("随着项目的越来越大和复杂,大型项目当中含有多个js文件,这时候就需要考虑多个js文件之间的加载顺序和文件之间的各种依赖关系,这给开发者带来了诸多不便,并且多个文件分开加载会带来一定的性能损耗,出于这一目的的考虑,打包应用程序应运而生")]),s._v(" "),t("p",[s._v("逻辑多,文件多,项目复杂度提高了")]),s._v(" "),t("p",[s._v("前端技术的不断发展,是因为前端项目的复杂度不断提高推动的,比如说 想要想要前端代码具有类型校验能力,出现了typescript,觉得css不好用,于是出现了各种css预处理器")]),s._v(" "),t("p",[s._v("针对前端项目复杂度提升带来的一个项目需要依赖多个模块的场景,诞生了各种模块化的方案,其中webpack是比较具有代表性的打包工具")]),s._v(" "),t("h4",{attrs:{id:"webpack的优势-可插拔-可按需配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的优势-可插拔-可按需配置"}},[s._v("#")]),s._v(" webpack的优势 可插拔,可按需配置")]),s._v(" "),t("h1",{attrs:{id:"webpack配置实战"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置实战"}},[s._v("#")]),s._v(" webpack配置实战")]),s._v(" "),t("h2",{attrs:{id:"学习目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[s._v("#")]),s._v(" 学习目标:")]),s._v(" "),t("h3",{attrs:{id:"_1-理解前端模块化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-理解前端模块化"}},[s._v("#")]),s._v(" 1.理解前端模块化")]),s._v(" "),t("p",[t("strong",[s._v("这里需要了解一些相关知识，如模块化")])]),s._v(" "),t("p",[t("strong",[s._v("1.作用域")])]),s._v(" "),t("p",[s._v("​\t作用域 描述的是程序在运行时候,变量 函数 对象的可访问性,作用域决定了代码中变量和其他资源的可见性")]),s._v(" "),t("p",[s._v("​\t全局作用域")]),s._v(" "),t("p",[s._v("​\t函数作用域\n​\tes6=>块级作用域")]),s._v(" "),t("p",[t("strong",[s._v("2.命名空间")]),s._v(" "),t("strong",[s._v("3.模块化")])]),s._v(" "),t("p",[s._v("模块化的出现，是因为前端项目的复杂度越来越大，")]),s._v(" "),t("h5",{attrs:{id:"极有可能存在着重名的变量和函数-如果都处在一个共同的作用域之下-可能会引起冲突以及相互修改-以至于拿不到想要想要的结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#极有可能存在着重名的变量和函数-如果都处在一个共同的作用域之下-可能会引起冲突以及相互修改-以至于拿不到想要想要的结果"}},[s._v("#")]),s._v(" 极有可能存在着重名的变量和函数，如果都处在一个共同的作用域之下，可能会引起冲突以及相互修改，以至于拿不到想要想要的结果")]),s._v(" "),t("p",[s._v("命名冲突的问题可以使用命名空间解决\n例如")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("var a = {\n    name:\"angla\",\n\tsex:\"girl\",\n\ttell:function(){\n        console.log('i am'+this.name);\n        console.log('i am'+this.sex)\n\t}\n}\n\nvar b = {\n    name:\"bob\",\n\tsex:\"boy\",\n\ttell:function(){\n        console.log('i am'+this.name);\n        console.log('i am'+this.sex)\n\t}\n}\n以上代码解决了命名冲突的问题，但是外部仍然可以随意访问修改\n存在安全问题，单纯的使用命名空间，不能解决变量和函数能被随意访问可篡改的问题，我们只想对外提供部分的代码供外界访问，这里需要用到闭包和立即执行函数\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1629886996728.png",alt:"1629886996728"}})]),s._v(" "),t("p",[s._v("想使用上面这段代码的时候，只需要将这段代码放在一个独立的文件当中，在需要用到的地方 直接加载该文件，一定程度上满足了代码的复用性")]),s._v(" "),t("p",[t("strong",[s._v("升级写法")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1629887384126.png",alt:"1629887384126"}})]),s._v(" "),t("p",[t("strong",[s._v("将包含tell方法的一个对象,挂载到window上")])]),s._v(" "),t("p",[s._v("第一个window是形参,立即执行参数后面的()里面传的是实参表示全局对象window")]),s._v(" "),t("p",[s._v("如果不将特定功能的代码块封装成模块，如专门用于处理网络请求的模块，错误处理的模块，专门渲染的模块，由每个单独的js文件负责一个单一的功能，多个功能点集成一个功能块，是模块的一种实现形式")]),s._v(" "),t("h4",{attrs:{id:"模块化带来的优点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模块化带来的优点"}},[s._v("#")]),s._v(" 模块化带来的优点")]),s._v(" "),t("p",[t("strong",[s._v("模块化保证了特定代码在运行时的私有作用域以及变量 函数 对象的访问性，可见性")])]),s._v(" "),t("p",[t("strong",[s._v("模块化的优点")]),s._v("\n1.作用域的封装")]),s._v(" "),t("p",[s._v("2.代码的可重用")]),s._v(" "),t("p",[s._v("3.降低代码耦合度，解耦")]),s._v(" "),t("h4",{attrs:{id:"模块化的进化史"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模块化的进化史"}},[s._v("#")]),s._v(" 模块化的进化史")]),s._v(" "),t("h5",{attrs:{id:"amd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amd"}},[s._v("#")]),s._v(" "),t("strong",[s._v("AMD")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635835350837.png",alt:"1635835350837"}})]),s._v(" "),t("p",[s._v("AMD规范使用define函数进行定义模块\n该函数接收三个参数 ,")]),s._v(" "),t("p",[s._v("第一个参数'getSum'表示给模块起的名字")]),s._v(" "),t("p",[s._v("第二个参数表示当前模块需要的依赖\n第三个参数,可以是一个函数也可以是一个对象")]),s._v(" "),t("p",[s._v("如果是函数,可以利用函数的返回值将定义的模块接口导出\n如果是对象,这个对象本身就是当前模块的导出")]),s._v(" "),t("h6",{attrs:{id:"通过amd规范定义模块的好处是"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过amd规范定义模块的好处是"}},[s._v("#")]),s._v(" 通过AMD规范定义模块的好处是")]),s._v(" "),t("p",[s._v("它显式的表达出了每个模块所依赖的其他模块有哪些,并且模块的定义,也不在绑定在全局对象window上,这更进一步增强了模块的安全性,不必担心模块在其他地方被篡改")]),s._v(" "),t("h5",{attrs:{id:"commomjs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#commomjs"}},[s._v("#")]),s._v(" "),t("strong",[s._v("COMMOMJS")])]),s._v(" "),t("p",[s._v("2009年被提出的js规范")]),s._v(" "),t("p",[s._v("最开始是为了定义服务端的模块标准,而不适用于浏览器环境,而后nodejs采用并实现了部分规范,在模块系统上做了一些调整,一般来说,不会严格区分"),t("strong",[s._v("COMMOMJS")]),s._v("和"),t("strong",[s._v("nodejs")]),s._v("的模块标准,两种标准之间近乎一致,因此在语境当中,nodejs使用的模块化标准一般就指代"),t("strong",[s._v("COMMOMJS")])]),s._v(" "),t("p",[s._v("在COMMOMJS当中,一个文件就是一个模块,并且拥有属于自己的独立作用域和上下文,模块的依赖,通过**require()**进行引入,")]),s._v(" "),t("p",[t("strong",[s._v("模块的接口暴露使用export导出")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635835864925.png",alt:"1635835864925"}})]),s._v(" "),t("h6",{attrs:{id:"amd和commomjs的共同点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amd和commomjs的共同点"}},[s._v("#")]),s._v(" AMD和COMMOMJS的共同点")]),s._v(" "),t("p",[s._v("AMD和COMMOMJS共同之处就是强调了模块的依赖必须显示引入,这样方便在维护复杂模块时,开发者可以不比关心各个模块之间引入顺序的问题")]),s._v(" "),t("h5",{attrs:{id:"es6-module-js模块化-语法级实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#es6-module-js模块化-语法级实现"}},[s._v("#")]),s._v(" "),t("strong",[s._v("ES6 MODULE")]),s._v(" js模块化 语法级实现")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635836622683.png",alt:"1635836622683"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635836841080.png",alt:"1635836841080"}})]),s._v(" "),t("h3",{attrs:{id:"_2-理解webpack打包的核心思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-理解webpack打包的核心思路"}},[s._v("#")]),s._v(" 2.理解webpack打包的核心思路")]),s._v(" "),t("h4",{attrs:{id:"学习目标-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#学习目标-2"}},[s._v("#")]),s._v(" 学习目标")]),s._v(" "),t("p",[s._v("​\t\t\t"),t("strong",[s._v("--webpack与立即执行函数的关系")])]),s._v(" "),t("p",[s._v("​\t\t\t"),t("strong",[s._v("--webpack打包的核心")])]),s._v(" "),t("h4",{attrs:{id:"webpack的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的安装"}},[s._v("#")]),s._v(" webpack的安装")]),s._v(" "),t("p",[s._v("​\t"),t("strong",[s._v("本地安装")])]),s._v(" "),t("p",[s._v("​")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install --save-dev webpack\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("​\t\t"),t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636002072130.png",alt:"1636002072130"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636002116052.png",alt:"1636002116052"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install --save-dev webpack@<version>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("​\t如果你使用 webpack 4+ 版本，你还需要安装 CLI。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn安装: yarn add webpack webpack-cli --dev\t\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install --save-dev webpack-cli\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635838744556.png",alt:"1635838744556"}})]),s._v(" "),t("p",[s._v("​\t"),t("strong",[s._v("全局安装")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install --global webpack\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("查看webpack版本")])]),s._v(" "),t("p",[s._v("webpack --version")]),s._v(" "),t("h4",{attrs:{id:"webpack的打包机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的打包机制"}},[s._v("#")]),s._v(" webpack的打包机制")]),s._v(" "),t("p",[s._v("在项目的根目录下运行webpack,webpack会寻找src目录下的index.js,然后把index.js里面的逻辑给打包出来,放在一个新的文件夹dist下的main.js当中")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635852793661.png",alt:"1635852793661"}})]),s._v(" "),t("h3",{attrs:{id:"_3-理解webpack当中的-关键人物"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-理解webpack当中的-关键人物"}},[s._v("#")]),s._v(' 3.理解webpack当中的"关键人物"')]),s._v(" "),t("h4",{attrs:{id:"_3-1-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-loader"}},[s._v("#")]),s._v(" 3.1 "),t("strong",[s._v("loader")])]),s._v(" "),t("p",[t("strong",[s._v("为什么需要loader，loader是什么?")])]),s._v(" "),t("p",[s._v("定义，loader 就是一个 node 模块，接收一些参数，将不被webpack识别的资源转化成webpack能够识别的模块")]),s._v(" "),t("p",[s._v("loader让webpack能够去处理那些非js文件（webpack自身只能够处理"),t("strong",[s._v("js")]),s._v("和"),t("strong",[s._v("JSON")]),s._v("）")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635945691527.png",alt:"1635945691527"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("loader 就是一个 node 模块，这很符合 webpack 中「万物皆模块」的思路。既然是 node 模块，那就一定会导出点什么。在 webpack 的定义中，loader 导出一个函数，loader 会在转换源模块（resource）的时候调用该函数。在这个函数内部，我们可以通过传入 `this` 上下文给 Loader API 来使用它们。回顾一下头图左边的那些模块，他们就是所谓的源模块，会被 loader 转化为右边的通用文件，因此我们也可以概括一下 loader 的功能：把源模块转换成通用模块。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-1-1css-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1css-loader"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.1css loader")])]),s._v(" "),t("p",[t("strong",[s._v("安装：默认情况下")]),s._v("，webpack是不能处理css文件的，因为css不是一个js模块，因此需要安装一个loader进行转换")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add css-loader --dev 安装到开发依赖\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("！！！css-loader只是将当前的css处理为webpack可以识别的模块类型，并不能够把开发者书写的样式放页面上使用")])]),s._v(" "),t("p",[t("strong",[s._v("行内loader引入")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import 'css-loader!../css/login.css'必须要用！分隔，如果有多个loader则需要使用多个！\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("cssloader处理css文件")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635913580854.png",alt:"1635913580854"}})]),s._v(" "),t("p",[s._v("配置文件引入loader**")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635923524893.png",alt:"1635923524893"}})]),s._v(" "),t("p",[s._v("loader的几种写法")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("数组写法use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n对象写法use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//引入css loader")]),s._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// options: {},    //可选的 当自定义一些loader的时候 需要接收一些配置参数，依据配置参数的不同做对应的处理")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// query: {}           //webpack4使用 webpack5当中被合并到options里")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n字符串写法：loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),s._v(" 不需要use\n\n注意 loader的执行顺序，是从右往左的，从下往上的\n也就是需要先加载的loader写在后面：\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"style-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 先加载css"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("》style\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h5",{attrs:{id:"_3-1-2style-loader的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2style-loader的使用"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.2style-loader的使用")])]),s._v(" "),t("p",[s._v("会在html页面当中创建style标签,并插入经过css-loader转换的的css")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635962325249.png",alt:"1635962325249"}})]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add style-loader --dev 配置同css-loader一样\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-1-3sass-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3sass-loader"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.3sass-loader")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add sass-loader -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-1-4使用postcss-loader-处理css兼容性问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4使用postcss-loader-处理css兼容性问题"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.4使用postcss-loader 处理css兼容性问题")])]),s._v(" "),t("p",[s._v("使用"),t("strong",[s._v("postcss-loader")]),s._v("和"),t("strong",[s._v("autoprefixer插件")]),s._v("处理css的兼容")]),s._v(" "),t("p",[s._v("介绍:用js转换css的工具,=>\nPostCss主要功能有以下两个\n1.第一,将css解析成可以操作的AST (抽象语法树)\n2.第二,调用插件来处理AST并得到结果\nPostCss所能执行的任务非常多,同时涵盖了传统意义上的预处理和后处理.")]),s._v(" "),t("p",[s._v("PostCss是一个全新的工具,给前端开发人员带来了不一样的处理css的方式\n"),t("strong",[s._v("总结")]),s._v(":PostCss对于css作用,相当于babel对于js的作用")]),s._v(" "),t("p",[t("strong",[s._v("1.下载安装")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add postcss-loader autoprefixer -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("2.创建post配置文件")])]),s._v(" "),t("p",[s._v("根目录下新建postcss.config.js文件\n"),t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636012568650.png",alt:"1636012568650"}})]),s._v(" "),t("p",[t("strong",[s._v("3.配置样式表需要兼容的目标浏览器")])]),s._v(" "),t("p",[s._v("有两种方式可以进行配置\n"),t("strong",[s._v("1.package.json")])]),s._v(" "),t("blockquote",[t("p",[s._v("last 2 versions => 考虑浏览器的最后两个版本")]),s._v(" "),t("p",[s._v("1% 市场份额大于百分之一的浏览器\nnot dead 还存活的浏览器")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636012684005.png",alt:"1636012684005"}})]),s._v(" "),t("p",[t("strong",[s._v("2.根目录下新建.browserslistrc")])]),s._v(" "),t("p",[s._v("书写以下内容")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636013852239.png",alt:"1636013852239"}})]),s._v(" "),t("p",[t("strong",[s._v("3.将postcss-loader加入到webpack当中")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636013943101.png",alt:"1636013943101"}})]),s._v(" "),t("p",[s._v("注意 必须要在css-loader之前使用")]),s._v(" "),t("p",[t("strong",[s._v("最终效果:")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636013824323.png",alt:"1636013824323"}})]),s._v(" "),t("h5",{attrs:{id:"_3-1-5使用postcss-插件做移动端的rem适配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-5使用postcss-插件做移动端的rem适配"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.5使用postcss 插件做移动端的rem适配")])]),s._v(" "),t("p",[s._v("目标：使用postcss插件体系做rem适配")]),s._v(" "),t("p",[t("strong",[s._v("背景:")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("做rem适配,就是要把我们在样式中书写的px转成rem")])]),s._v(" "),t("li",[t("p",[s._v("px转rem需要知道基准字体大小,用实际的px/基准字体大小=>rem\n1rem = html元素的字体大小")])]),s._v(" "),t("li",[t("p",[s._v("当设备屏幕尺寸发生改变的时候,需要重新设置html的字体大小")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add postcss postcss-pxtorem -D 安装到开发依赖\nyarn add amfe-flexible -S 写入到依赖 生产环境要用到\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("**wepack打包入口中导入"),t("code",[s._v("amfe-flexible**")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636034221326.png",alt:"1636034221326"}})]),s._v(" "),t("p",[t("strong",[s._v("postcss.config.js配置px转rem的规则")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636034199622.png",alt:"1636034199622"}})])])]),s._v(" "),t("p",[t("strong",[s._v("准备px的样式代码")])]),s._v(" "),t("p",[s._v("直接书写px单位")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636034578182.png",alt:"1636034578182"}})]),s._v(" "),t("p",[t("strong",[s._v("样式文章准备一份")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636034602660.png",alt:"1636034602660"}})]),s._v(" "),t("p",[t("strong",[s._v("内样式准备一份")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636034608185.png",alt:"1636034608185"}})]),s._v(" "),t("p",[t("strong",[s._v("打包观察效果")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636034542179.png",alt:"1636034542179"}})]),s._v(" "),t("p",[t("strong",[s._v("总结:")]),s._v("\t 发现postcss只会转样式文件中的px、不会转行内样式中的px")]),s._v(" "),t("h5",{attrs:{id:"_3-1-6webpack环境检测"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-6webpack环境检测"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.6webpack环境检测")])]),s._v(" "),t("p",[t("strong",[s._v("检测webpack的使用环境,是开发环境还是生产环境")])]),s._v(" "),t("h4",{attrs:{id:"不同环境下-使用不同的webpack-config-js配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#不同环境下-使用不同的webpack-config-js配置文件"}},[s._v("#")]),s._v(" 不同环境下,使用不同的webpack.config.js配置文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("通用配置 webpack.common.js\n例如生产环境下=>配置webpack.prod.js =>mode =>production\n开发环境下 =>配置webpack.dev.js =>mode =>development\n\n\n使用 webpack-marge 合并通用配置和特定环境配置。=>yarn add webpack-merge -D\n通过 cross-env 配置环境变量，区分开发环境和生产环境。\nyarn add cross-env -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("webpack-4获取当前使用环境")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("process.env.NODE_ENV webpack4版本=> webpack.config.js当中使用这一条表达式获取当前的webpack使用环境\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("webpack5获取当前使用环境")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package.json=> \n  "scripts": {\n    "build": "webpack --node-env=production",\n    "serve": "webpack --node-env=development"\n  },\n webpack.config.js=>\n \n  console.log(process.env.NODE_ENV)   //webpack5获取当前的使用环境\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("判断当前webpack的环境")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636041198587.png",alt:"1636041198587"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636041259673.png",alt:"1636041259673"}})]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("strong",[s._v("选项")])]),s._v(" "),t("th",[t("strong",[s._v("描述")])])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("development")]),s._v(" "),t("td",[s._v("会将 "),t("code",[s._v("DefinePlugin")]),s._v(" 中 "),t("code",[s._v("process.env.NODE_ENV")]),s._v(" 的值设置为 "),t("code",[s._v("development")]),s._v(". 为模块和 chunk 启用有效的名。")])]),s._v(" "),t("tr",[t("td",[s._v("production")]),s._v(" "),t("td",[s._v("会将 "),t("code",[s._v("DefinePlugin")]),s._v(" 中 "),t("code",[s._v("process.env.NODE_ENV")]),s._v(" 的值设置为 "),t("code",[s._v("production")]),s._v("。为模块和 chunk 启用确定性的混淆名称，"),t("code",[s._v("FlagDependencyUsagePlugin")]),s._v("，"),t("code",[s._v("FlagIncludedChunksPlugin")]),s._v("，"),t("code",[s._v("ModuleConcatenationPlugin")]),s._v("，"),t("code",[s._v("NoEmitOnErrorsPlugin")]),s._v(" 和 "),t("code",[s._v("TerserPlugin")]),s._v(" 。")])]),s._v(" "),t("tr",[t("td",[s._v("none")]),s._v(" "),t("td",[s._v("不使用任何默认优化选项")])])])]),s._v(" "),t("p",[s._v("如果没有设置，webpack 会给 "),t("code",[s._v("mode")]),s._v(" 的默认值设置为 "),t("code",[s._v("production")]),s._v("。")]),s._v(" "),t("h6",{attrs:{id:"tip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tip"}},[s._v("#")]),s._v(" Tip")]),s._v(" "),t("p",[s._v("如果 "),t("code",[s._v("mode")]),s._v(" 未通过配置或 CLI 赋值，CLI 将使用可能有效的 "),t("code",[s._v("NODE_ENV")]),s._v(" 值作为 "),t("code",[s._v("mode")]),s._v("。")]),s._v(" "),t("p",[s._v("webpack-5")]),s._v(" "),t("h5",{attrs:{id:"_3-1-7-使用插件提取抽离css"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-7-使用插件提取抽离css"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.7 使用插件提取抽离CSS")])]),s._v(" "),t("p",[t("strong",[s._v("目标:")]),s._v(" 将css打包到单独的css文件当中,做cdn加速")]),s._v(" "),t("p",[s._v("会将入口文件所依赖的所有样式文件 都提取到一个css文件当中")]),s._v(" "),t("p",[t("strong",[s._v("1.安装插件:")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add mini-css-extract-plugin -D\n建议 mini-css-extract-plugin 与 css-loader 一起使用。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("2.配置webpack")])]),s._v(" "),t("p",[s._v("之后将 loader 与 plugin 添加到你的 "),t("code",[s._v("webpack")]),s._v(" 配置文件中。 例如：")]),s._v(" "),t("p",[s._v("webpack.config.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("引入插件 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" MiniCssExtractPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mini-css-extract-plugin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MiniCssExtractPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注册插件")]),s._v("\n  module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("i")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MiniCssExtractPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("loader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"css-loader"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//配置loader")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("blockquote",[t("p",[s._v("本插件会将 CSS 提取到单独的文件中，为每个包含 CSS 的 JS 文件创建一个 CSS 文件，并且支持 CSS 和 SourceMaps 的按需加载。")]),s._v(" "),t("p",[s._v("本插件基于 webpack v5 的新特性构建，并且需要 webpack 5 才能正常工作。")])]),s._v(" "),t("p",[t("strong",[s._v("结果:")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636040956999.png",alt:"1636040956999"}})]),s._v(" "),t("p",[t("strong",[s._v("可以看到,去掉了style-laoder,html页面当中不再使用style标签进行样式的引入,改用了MiniCssExtractPlugin 生成了外链的css文件")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636040992201.png",alt:"1636040992201"}})]),s._v(" "),t("h5",{attrs:{id:"_3-1-8-webpack5-使用资源模块类型打包处理图片文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-8-webpack5-使用资源模块类型打包处理图片文件"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.8 webpack5 使用资源模块类型打包处理图片文件")])]),s._v(" "),t("p",[s._v("**目标:**使用asset module方式 (webpack5版本新增的)")]),s._v(" "),t("p",[s._v("资源模块(asset module)是一种模块类型，它允许使用资源文件（字体，图标等）而无需配置额外 loader。")]),s._v(" "),t("p",[t("strong",[s._v("即webpack5当中不配置loader 一样可以将图片进行打包且不报错")])]),s._v(" "),t("p",[t("strong",[s._v("在 webpack 5 之前，通常使用：")])]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://v4.webpack.js.org/loaders/raw-loader/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("raw-loader")]),t("OutboundLink")],1),s._v(" 将文件导入为字符串")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://v4.webpack.js.org/loaders/url-loader/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("url-loader")]),t("OutboundLink")],1),s._v(" 将文件作为 data URI 内联到 bundle 中=>转base64")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://v4.webpack.js.org/loaders/file-loader/",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("file-loader")]),t("OutboundLink")],1),s._v(" 将文件发送到输出目录")])]),s._v(" "),t("p",[t("strong",[s._v("资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：")])]),s._v(" "),t("p",[s._v("超过8kb的直接打包输出到imgage文件夹当中")]),s._v(" "),t("p",[s._v("资源模块类型(asset module type)，通过添加 4 种新的模块类型，来替换所有这些 loader：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("asset/resource")]),s._v(" 发送一个单独的文件并导出 URL。之前通过使用 "),t("code",[s._v("file-loader")]),s._v(" 实现。")]),s._v(" "),t("li",[t("code",[s._v("asset/inline")]),s._v(" 导出一个资源的 data URI。之前通过使用 "),t("code",[s._v("url-loader")]),s._v(" 实现。")]),s._v(" "),t("li",[t("code",[s._v("asset/source")]),s._v(" 导出资源的源代码。之前通过使用 "),t("code",[s._v("raw-loader")]),s._v(" 实现。")]),s._v(" "),t("li",[t("code",[s._v("asset")]),s._v(" 在导出一个 data URI 和发送一个单独的文件之间"),t("strong",[s._v("自动选择")]),s._v("。之前通过使用 "),t("code",[s._v("url-loader")]),s._v("，并且配置资源体积限制实现。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("当在 webpack 5 中使用旧的 assets loader（如 `file-loader`/`url-loader`/`raw-loader` 等）和 asset 模块时，你可能想停止当前 asset 模块的处理，并再次启动处理，这可能会导致 asset 重复，你可以通过将 asset 模块的类型设置为 `'javascript/auto'` 来解决。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-diff line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[s._v("webpack.config.js\nmodule.exports = {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v(" module: {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("  rules: [\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("     {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("       test: /\\.(png|jpg|gif)$/i,\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("       use: [\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("         {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("           loader: 'url-loader',\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("           options: {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("             limit: 8192,\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("           }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("         },\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("       ],\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("       type: 'javascript/auto'\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("     },\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v("  ]\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[s._v(" },\n")])]),s._v("}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636061327513.png",alt:"1636061327513"}})]),s._v(" "),t("p",[t("strong",[s._v("注意 在js当中不能通过src属性的方式引入图片,需要遵循模块化的方式进行导入图片资源")])]),s._v(" "),t("h5",{attrs:{id:"_3-1-9-webpack4-使用loader打包处理图片资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-9-webpack4-使用loader打包处理图片资源"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1.9 webpack4 使用loader打包处理图片资源")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ yarn add url-loader file-loader --save-dev将其安装为开发依赖项添加到 devDependencies\n$ yarn add url-loader file-loader -D url-loader需要依赖file-loader\nyarn add html-loader -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",[t("li",[t("p",[t("strong",[s._v("url-loader可将文件转换为 base64 URI")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" img "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./image.png'")]),s._v("\nurl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader 的工作方式与 file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("loader 类似，但如果文件小于字节限制，则可以返回 DataURL。\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack.config.js")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t\t            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//使用url-loader 需要依赖于file-loader")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//webpack4处理图片资源   问题:=>这种方式处理不了html中img图片 地址无法解析")]),s._v("\n                test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpg|gif|jpeg|webp)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("i")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'url-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    limit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//图片小于8kb的时候 就会被base64处理")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    base64会将图片转换成base64编码的方式,变成字符串,浏览器可以将该字符串当成图像的内容进行解析")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    优点,减少页面请求数量,减轻服务器压力")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    缺点, 图片体积增大约33%(文件请求速度更慢)")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    问题 因为url-loader默认使用es6模块化解析 而html-loader引入的是commonjs")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    解析时候会报错")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//    解决方法 =>关闭url-loaderd的es6模块化,使用commonjs解析")]),s._v("\n                    esModule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//关闭url-loaderd的es6模块化,使用commonjs解析")]),s._v("\n                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//图片重命名   ")]),s._v("\n                    name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[hash:10].[ext]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//给图片进行重命名 [hash:10] ")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//取图片的hash的前十位 [ext]取文件原来拓展名")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'javascript/auto'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//webpack5当中使用webpack4的loader 需要添加这一项")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// webpack4当中使用loader处理图片资源")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//处理html当中的img图片,负责引入img 从而能被url-loader处理")]),s._v("\n                test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.html$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("i")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'html-loader'")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("file-loader")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("html-loader 处理html当中的img图片")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("{\n    //处理html当中的img图片,负责引入img 从而能被url-loader处理\n    test: /\\.html$/i,\n    loader: 'html-loader'\n},\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])]),s._v(" "),t("p",[s._v("默认情况下:")]),s._v(" "),t("p",[t("strong",[s._v("url-loader会使用es6 module去处理模块")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("url-loader=>esModule: false //关闭url-loaderd的es6模块化,使用commonjs解析 一定要写在options之后\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("html-loader 打包之后引入的img是commonjs的写法")])]),s._v(" "),t("p",[s._v("![img](file://C:/Users/tree/AppData/Roaming/Typora/typora-user-images/1636052735847.png?lastModify=1636052748)")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636053904456.png",alt:"1636053904456"}})]),s._v(" "),t("p",[t("strong",[s._v("成功的结果")])]),s._v(" "),t("p",[s._v("img标签和background-imgage中的图片地址 被成功解析")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636053682765.png",alt:"1636053682765"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636053884044.png",alt:"1636053884044"}}),s._v("图片地址是一个hash值")]),s._v(" "),t("h5",{attrs:{id:"_3-2-0-图片区分打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-0-图片区分打包"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.2.0 图片区分打包")])]),s._v(" "),t("p",[t("strong",[s._v("思考一个问题,webpack内部为什么会对图片做两种不同的处理?")])]),s._v(" "),t("p",[s._v("webpack5当中,assets资源模块处理图片的标准如下:\n看图片大小是否超过8kb,超过了直接打包到dist目录下,\n开发者可以对其进行重命名.")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636064462902.png",alt:"1636064462902"}})]),s._v(" "),t("p",[t("strong",[s._v("如果没超过,则将其转换成base64格式打包到js当中")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636065379462.png",alt:"1636065379462"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636065354765.png",alt:"1636065354765"}})]),s._v(" "),t("h5",{attrs:{id:"_3-2-1-打包处理字体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-打包处理字体"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.2.1 打包处理字体")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("index.js 入口文件\nconst icon1 = document.createElement('i')\nconst icon2 = document.createElement('i')\nicon1.className = 'iconfont icon-a-06-chanpinshuju'\nicon2.className = 'iconfont icon-a-01-shujuzhongxin'\ndocument.body.appendChild(icon1)\ndocument.body.appendChild(icon2)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("//处理字体\n{\n    test: /\\.(ttf|woff2?)/,\n    type: \"asset/resource\",\n    generator: {\n        filename: 'font/[name][ext]'\n    }\n},\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636069306479.png",alt:"1636069306479"}})]),s._v(" "),t("h5",{attrs:{id:"_3-2-2-babel-loader处理高级js语法-高级api-es6兼容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-babel-loader处理高级js语法-高级api-es6兼容"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.2.2 babel-loader处理高级JS语法 高级API es6兼容")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("安装babel-loader\nyarn add babel-loader @babel/core @babel/preset-env -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("webpack处理js文件,只会对里面的import export,  对es6的模块化导入导出做处理,\n无法处理例如箭头函数和es6 API等特性")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636088700389.png",alt:"1636088700389"}})]),s._v(" "),t("p",[t("strong",[s._v("在一些不支持es6语法的浏览器,可能会导致异常问题的产生")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636090383460.png",alt:"1636090383460"}})]),s._v(" "),t("p",[t("strong",[s._v("为了解决这种问题")]),s._v(" 需要配置babel")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("webpack.config.js\n{\n    test: /\\.m?js$/,\n    exclude: /node_modules/,    //排除node_module目录 不进行转换\n    use: {\n        loader: 'babel-loader',\n        options: {\n            presets: [\n                ['@babel/preset-env', {targets: \"defaults\"}]\n            ]\n        }\n    }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("strong",[s._v("结果")]),s._v("\n可以看到 使用了babel-loader之后,es6的语法被转换成"),t("strong",[s._v("es5语法")]),s._v(","),t("strong",[s._v("例如 let const 箭头函数")]),s._v("但是仍然存在一个问题,例如"),t("strong",[s._v("includes()"),t("strong",[s._v("这种")]),s._v("ES7的API")]),s._v("仍未进行转换,对不支持"),t("strong",[s._v("ES7")]),s._v("的浏览器存在兼容问题")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636090420289.png",alt:"1636090420289"}})]),s._v(" "),t("p",[t("strong",[s._v("这里需要对这些高级api做一个补丁")])]),s._v(" "),t("h5",{attrs:{id:"_3-2-3-babel打补丁处理高级es6-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-babel打补丁处理高级es6-api"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.2.3 babel打补丁处理高级ES6+ API")])]),s._v(" "),t("p",[t("strong",[s._v("babel的配置 可以写在webpack.config.js当中")]),s._v("\n也可以单独抽离出一个文件,让文件的分工更明确\n"),t("strong",[s._v("创建一个babel.config.js文件")])]),s._v(" "),t("p",[s._v("这里需要用到一个补丁 "),t("strong",[s._v("polyfill")]),s._v(" (垫片)处理类似的assign,includes map....这些浏览器不支持的新特性新语法")]),s._v(" "),t("p",[s._v("某些浏览器没有的方法,最直接的办法是对不兼容的浏览器,"),t("strong",[s._v("重写一遍语法")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add @babel/polyfill -S\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636109355808.png",alt:"1636109355808"}})]),s._v(" "),t("p",[s._v("**默认情况下:**会全部导入,导致体积过大,为了更好的性能,可以使用按需导入\n"),t("strong",[s._v("单独抽离一个babel.config.js")]),s._v("\n默认安装的corejs是2的")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add core-js@3 -S\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n    options: {\n        presets: [\n            [\n                \"@babel/preset-env\",\n                // {targets: \"defaults\"}    //如果项目根目录存在browserlistrc文件 就不用写该属性\n                {\n                    // useBuiltIns:false,  //如果不设置默认就是false 全部导入\n                    // useBuiltIns: 'entry',    \n                    //entry 需要手动的在webpack打包的入口导入@babel/polyfill\n                    useBuiltIns: 'usage',    //纯自动化 按需导入\n                    corejs: 3 //3版本包含比较全面的核心API的转换\n                }\n            ]\n        ],\n        plugins: [{}]\n    }\n}\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("strong",[s._v("设置成entry 入口文件需要设置成数组的形式")]),s._v(" "),t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636111663233.png",alt:"1636111663233"}})]),s._v(" "),t("p",[t("strong",[s._v("打包成功之后如果提示这个")]),s._v(" 提示说的是 当使用了useBuiltIns: 'usage'的时候 就不要再使用import导入@babel/polyfill =========>或者使用use "),t("code",[s._v("useBuiltIns: 'entry'")]),s._v("代替")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("  When setting `useBuiltIns: 'usage'`, polyfills are automatically imported when needed.\n  Please remove the direct import of `@babel/polyfill` or use `useBuiltIns: 'entry'` instead.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("4、解决相同API和特性，在不同模块被重复转换的问题，导致文件打包的体积变大")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("yarn add core"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("js @babel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("runtime @babel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("runtime"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("corejs3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("S")]),s._v("\nyarn add @babel"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("transform"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("runtime "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("有时 Babel 可能会在输出中注入一些跨文件相同的代码，因此可能会被重用。例如：")]),s._v(" "),t("p",[s._v("例如，使用ES6+面向对象类的转换:")]),s._v(" "),t("p",[t("strong",[s._v("index.js")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636116186746.png",alt:"1636116186746"}})]),s._v(" "),t("p",[t("strong",[s._v("index.js当中引入world.js")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636116207638.png",alt:"1636116207638"}})]),s._v(" "),t("p",[s._v("这意味着每个包含类的文件每次都会"),t("code",[s._v("_classCallCheck")]),s._v("重复该函数。"),t("strong",[s._v("同一份代码,由于两个不同模块 导致打包输出了两次")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add @babel/runtime @babel/runtime-corejs3 -S @babel/runtime 包含@babel/helpers 和 regenerator-runtime===>@babel/helpers 定义了一些处理新的语法关键字的辅助函数，<br />把需要的辅助函数当做一个模块引入代码\n\n\n\n\n\n\nyarn add @babel/plugin-transform-runtime -D\n@babel/plugin-transform-runtime 解决Babel 可能会在输出中注入一些跨文件相同的代码,因此可能会被重用，导入文件体积增大\n\n\n\n\n \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("使用"),t("code",[s._v("@babel/plugin-transform-runtime")]),s._v("，它将替换对"),t("code",[s._v("@babel/runtime")]),s._v("版本的函数的引用。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" _classCallCheck "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/runtime/helpers/classCallCheck"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("Hello")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Hello")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("_classCallCheck")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("Wolrd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("World")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("_classCallCheck")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Wolrd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("需在通过babel的"),t("code",[s._v("plugins")]),s._v("选项进行配置，解决重复的问题")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 预设")]),s._v("\n\tpresets"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件")]),s._v("\n\tplugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@babel/plugin-transform-runtime'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        corejs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("5、准备es6核心api代码")]),s._v(" "),t("p",[s._v("6、打包观察效果")]),s._v(" "),t("p",[t("strong",[s._v("webpack4当中loader的使用")])]),s._v(" "),t("p",[t("strong",[s._v("分为三种")])]),s._v(" "),t("ol",[t("li",[s._v("行内loader")]),s._v(" "),t("li",[s._v("配置文件loader")]),s._v(" "),t("li",[s._v("命令行cli loader")])]),s._v(" "),t("p",[t("strong",[s._v("webpack5当中 以cli方式添加loader的方式被废弃 不被建议使用")])]),s._v(" "),t("h4",{attrs:{id:"_3-3-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-plugins"}},[s._v("#")]),s._v(" 3.3 "),t("strong",[s._v("plugins")])]),s._v(" "),t("p",[s._v("​\t(plugins)可以用于执行范围更广的任务，插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量等,每注册一个插件就是一个new的过程")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636002631426.png",alt:"1636002631426"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636006199288.png",alt:"1636006199288"}})]),s._v(" "),t("p",[s._v("webpack插件实际上就是一个具有apply方法的"),t("strong",[s._v("对象")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636006863445.png",alt:"1636006863445"}})]),s._v(" "),t("h5",{attrs:{id:"_3-3-1使用htmlwebpackplugin处理-打包html资源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1使用htmlwebpackplugin处理-打包html资源"}},[s._v("#")]),s._v(" 3.3.1使用HtmlWebpackPlugin处理 打包html资源")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add html-webpack-plugin --dev\n该插件将为你生成一个 HTML5 文件， 在 body 中使用 script 标签引入你所有 webpack 生成的bundle\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("plugins的配置")]),s._v("=>webpack.config.js")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635967189988.png",alt:"1635967189988"}})]),s._v(" "),t("p",[s._v("这将会生成一个包含以下内容的 "),t("code",[s._v("dist/index.html")]),s._v(" 文件：")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635967222787.png",alt:"1635967222787"}})]),s._v(" "),t("p",[t("strong",[s._v("注意")])]),s._v(" "),t("p",[s._v("配置了该插件之后,打包后输出的html文件会自动帮忙引入入口文件当中的全部依赖,也就是不需要再手动引入了")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635969416970.png",alt:"1635969416970"}})]),s._v(" "),t("p",[s._v("如果你有多个 webpack 入口，他们都会在已生成 HTML 文件中的 "),t("code",[s._v("<script>")]),s._v(" 标签内引入。")]),s._v(" "),t("p",[s._v("如果在 webpack 的输出中有任何 CSS 资源（例如，使用 "),t("a",{attrs:{href:"https://webpack.docschina.org/plugins/mini-css-extract-plugin/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MiniCssExtractPlugin"),t("OutboundLink")],1),s._v(" 提取的 CSS），那么这些资源也会在 HTML 文件 "),t("code",[s._v("<head>")]),s._v(" 元素中的 "),t("code",[s._v("<link>")]),s._v(" 标签内引入。")]),s._v(" "),t("h5",{attrs:{id:"_3-3-2使用clean-webpack-plugin-自动清理上次打包输出的代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2使用clean-webpack-plugin-自动清理上次打包输出的代码"}},[s._v("#")]),s._v(" 3.3.2使用clean-webpack-plugin 自动清理上次打包输出的代码")]),s._v(" "),t("p",[s._v("安装")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add clean-webpack-plugin  -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-3-3编译进度条插件progress-bar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-3编译进度条插件progress-bar"}},[s._v("#")]),s._v(" 3.3.3编译进度条插件progress-bar")]),s._v(" "),t("p",[s._v("一般来说，中型项目的首次编译时间为 5-20s，没个进度条等得多着急，通过 "),t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fprogress-bar-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("progress-bar-webpack-plugin"),t("OutboundLink")],1),s._v(" 插件查看编译进度，方便我们掌握编译情况。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add progress-bar-webpack-plugin -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("贴心的为进度百分比添加了加粗和绿色高亮态样式。")]),s._v(" "),t("h5",{attrs:{id:"_3-3-4编译速度分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-4编译速度分析"}},[s._v("#")]),s._v(" 3.3.4编译速度分析")]),s._v(" "),t("p",[s._v("优化 webpack 构建速度，首先需要知道是哪些插件、哪些 loader 耗时长，方便我们针对性的优化。")]),s._v(" "),t("p",[s._v("通过 "),t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fspeed-measure-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("speed-measure-webpack-plugin"),t("OutboundLink")],1),s._v(" 插件进行构建速度分析，可以看到各个 loader、plugin 的构建时长，后续可针对耗时 loader、plugin 进行优化。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("安装 yarn add speed-measure-webpack-plugin -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-3-5-打包体积分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-5-打包体积分析"}},[s._v("#")]),s._v(" 3.3.5 打包体积分析")]),s._v(" "),t("p",[s._v("同样，优化打包体积，也需要先分析各个 bundle 文件的占比大小，来进行针对优化。")]),s._v(" "),t("p",[s._v("使用 "),t("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fwebpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack-bundle-analyzer"),t("OutboundLink")],1),s._v(" 查看打包后生成的 bundle 体积分析，将 bundle 内容展示为一个便捷的、交互式、可缩放的树状图形式。帮助我们分析输出结果来检查模块在何处结束。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("安装yarn add webpack-bundle-analyzer -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-3-6-自动更新-热更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-6-自动更新-热更新"}},[s._v("#")]),s._v(" 3.3.6 自动更新 热更新")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.docschina.org%2Fguides%2Fdevelopment%2F%23choosing-a-development-tool",target:"_blank",rel:"noopener noreferrer"}},[s._v("自动更新"),t("OutboundLink")],1),s._v(" 指的是，在开发过程中，修改代码后，无需手动再次编译，可以自动编译代码更新编译后代码的功能。")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fwebpack%2Fwebpack-dev-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack-dev-server"),t("OutboundLink")],1),s._v("的使用")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.docschina.org%2Fguides%2Fhot-module-replacement%2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("热更新"),t("OutboundLink")],1),s._v(" 指的是，在开发过程中，修改代码后，仅更新修改部分的内容，无需刷新整个页面。")]),s._v(" "),t("p",[s._v("修改 webpack-dev-server 配置")]),s._v(" "),t("p",[s._v("使用 webpack 内置的 HMR 插件，更新 webpack-dev-server 配置。")]),s._v(" "),t("p",[t("strong",[s._v("3.3.7 加快构建速度")])]),s._v(" "),t("p",[t("strong",[s._v("cache")])]),s._v(" "),t("p",[s._v("通过配置 "),t("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2Fconfiguration%2Fcache%2F%23root",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack 持久化缓存"),t("OutboundLink")],1),s._v(" "),t("code",[s._v("cache: filesystem")]),s._v("，来缓存生成的 webpack 模块和 chunk，改善构建速度。")]),s._v(" "),t("p",[s._v("简单来说，通过 "),t("code",[s._v("cache: filesystem")]),s._v(" 可以将构建过程的 webpack 模板进行缓存，大幅提升二次构建速度、打包速度，当构建突然中断，二次进行构建时，可以直接从缓存中拉取，可提速 "),t("strong",[s._v("90%")]),s._v(" 左右。")]),s._v(" "),t("p",[t("code",[s._v("webpack.common.js")]),s._v(" 配置方式如下：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    cache"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'filesystem'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用文件缓存")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n复制代码\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("引入缓存后，首次构建时间将增加 15%，二次构建时间将减少 90%，效果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cca31e7e64748cc82bb184e3fa95ae4~tplv-k3u1fbpfcp-watermark.awebp",alt:"image.png"}})]),s._v(" "),t("h5",{attrs:{id:"加快-sass-loader-的构建速度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加快-sass-loader-的构建速度"}},[s._v("#")]),s._v(" "),t("strong",[s._v("加快 sass-loader 的构建速度")])]),s._v(" "),t("p",[t("strong",[s._v("thread-loader")])]),s._v(" "),t("p",[s._v("通过 "),t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fwebpack.docschina.org%2Floaders%2Fthread-loader%2F%23root",target:"_blank",rel:"noopener noreferrer"}},[s._v("thread-loader"),t("OutboundLink")],1),s._v(" 将耗时的 loader 放在一个独立的 worker 池中运行，加快 loader 构建速度")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add thread-loader -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_3-3-8-copy-webpack-plugin将单个文件或整个目录复制到构建目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-8-copy-webpack-plugin将单个文件或整个目录复制到构建目录"}},[s._v("#")]),s._v(" 3.3.8 copy-webpack-plugin将单个文件或整个目录复制到构建目录")]),s._v(" "),t("p",[s._v("有些资源是不需要打包的,只需copy一份到打包的输出文件当中")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn add  copy-webpack-plugin -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636207081878.png",alt:"1636207081878"}})]),s._v(" "),t("h4",{attrs:{id:"_3-4-entry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-entry"}},[s._v("#")]),s._v(" 3.4 Entry")]),s._v(" "),t("p",[s._v("​\t（entry）入口 webpack以哪个文件为入口起点开始打包，分析构建内部依赖图")]),s._v(" "),t("h4",{attrs:{id:"_3-5output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5output"}},[s._v("#")]),s._v(" 3.5Output")]),s._v(" "),t("p",[s._v("（output）指示webpack打包后的资源 bundles输出到哪里去")]),s._v(" "),t("h4",{attrs:{id:"_3-6-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-mode"}},[s._v("#")]),s._v(" 3.6 Mode")]),s._v(" "),t("p",[s._v("模式指示webpack使用相应模式的配置")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636005128387.png",alt:"1636005128387"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636005382659.png",alt:"1636005382659"}})]),s._v(" "),t("h4",{attrs:{id:"_3-6-webpack-source-map-快速定位错误源码位置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-webpack-source-map-快速定位错误源码位置"}},[s._v("#")]),s._v(" 3.6 Webpack_Source-map 快速定位错误源码位置")]),s._v(" "),t("h4",{attrs:{id:"_3-7wepack-dev-serve"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7wepack-dev-serve"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.7wepack-dev-serve")])]),s._v(" "),t("p",[t("strong",[s._v("更新完源代码自动打包")]),s._v("\n两种方式")]),s._v(" "),t("p",[t("strong",[s._v("1.")]),t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636207529712.png",alt:"1636207529712"}})]),s._v(" "),t("p",[s._v("或者")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636207586914.png",alt:"1636207586914"}})]),s._v(" "),t("p",[t("strong",[s._v("这种方式存在性能问题")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636207835264.png",alt:"1636207835264"}})]),s._v(" "),t("p",[s._v("局部刷新指的是不进行整个页面刷新")]),s._v(" "),t("p",[t("strong",[s._v("2")])]),s._v(" "),t("p",[s._v("配置了dev-serve的webpack,webpack开发服务器把dist打包到了内存当中,不会生成dist目录,")]),s._v(" "),t("p",[t("strong",[s._v("3.7.1HMR 模块热替换")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636305169476.png",alt:"1636305169476"}})]),s._v(" "),t("p",[t("strong",[s._v("指定某模块开启热更新")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636312656491.png",alt:"1636312656491"}})]),s._v(" "),t("h5",{attrs:{id:"output-publicpath跟devserver-publicpath区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#output-publicpath跟devserver-publicpath区别"}},[s._v("#")]),s._v(" output.publicPath跟devServer.publicPath区别")]),s._v(" "),t("p",[t("strong",[s._v("output.publicPath")])]),s._v(" "),t("p",[s._v("表示资源(assets)被引用的"),t("strong",[s._v("根路径")]),s._v("，在"),t("strong",[s._v("生产环境下")]),s._v("生效；可以是相对路径，也可以是绝对路径；")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('output: {\n\tpublicPath: "/dist/";\n}\n该配置会为index.html中引入的<script> <link>等标签中的资源路径添加前缀,前缀的值就是所设置的\npublic path 的值\n注意 这对你手动引入的静态资源不生效\n\n  \x3c!-- 手动静态引入了一个script，不受publicPath的影响 --\x3e\n  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6%2Ces7%2Ces2019%2Ces2018%2Ces2016%2Ces2017%2Ces2015%2Ces5%2Cdefault"><\/script>\n\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636357758463.png",alt:"1636357758463"}})]),s._v(" "),t("p",[t("strong",[s._v("相对路径和绝对路径")])]),s._v(" "),t("p",[s._v("如果配置为"),t("code",[s._v("相对路径")]),s._v("，那么该资源的引入路径是相对于你的html文件")]),s._v(" "),t("p",[s._v("如果配置为"),t("code",[s._v("绝对路径")]),s._v("，不带域名则从当前服务器获取资源，如果使用cdn，可以配置全路径")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636358020629.png",alt:"1636358020629"}})]),s._v(" "),t("h5",{attrs:{id:"webpack-dev-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-server"}},[s._v("#")]),s._v(" webpack-dev-server")]),s._v(" "),t("p",[s._v("使用"),t("code",[s._v("webpack-dev-server")]),s._v("启动一个快捷的本地开发服务器时会采用"),t("code",[s._v("config.devServer")]),s._v("参数，和生产环境不同，开发环境下webpack不会将执行文件打包到本地文件夹，而是存放到内存中，"),t("code",[s._v("devServer.publicPath")]),s._v("的含义和"),t("code",[s._v("output.publicPath")]),s._v("完全不同，它不会修改html中资源的路径，有点类似于"),t("code",[s._v("output.path")]),s._v("，用于配置前端文件的服务器访问路径。")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("必须以/开头，以/结尾")])]),s._v(" "),t("li",[s._v("如果配置了一个相对路径，会导致服务器无法访问到文件，出现空白页面")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("devServer: {\n    publicPath: '/assets/'\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1636358218318.png",alt:"1636358218318"}})]),s._v(" "),t("h2",{attrs:{id:"配置开发环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置开发环境"}},[s._v("#")]),s._v(" 配置开发环境")]),s._v(" "),t("h2",{attrs:{id:"webpack构建工程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack构建工程"}},[s._v("#")]),s._v(" webpack构建工程")]),s._v(" "),t("p",[s._v("webpack可以对不同规范的模块进行打包操作")]),s._v(" "),t("h4",{attrs:{id:"全局打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局打包"}},[s._v("#")]),s._v(" 全局打包")]),s._v(" "),t("p",[t("strong",[s._v("命令 webpack")])]),s._v(" "),t("p",[s._v("​\t使用全局的webpack进行打包存在着版本差异的问题,仍然用全局打包显然不合适,因此,在项目当中采用局部的打包的方式更好")]),s._v(" "),t("h4",{attrs:{id:"局部打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#局部打包"}},[s._v("#")]),s._v(" 局部打包")]),s._v(" "),t("p",[t("strong",[s._v("npx webpack")])]),s._v(" "),t("p",[s._v("默认情况下,webpack会查找src目录下的index.js文件作为入口文件,如果将index.js改名会导致打包报错")]),s._v(" "),t("h5",{attrs:{id:"自定义入口文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义入口文件"}},[s._v("#")]),s._v(" 自定义入口文件")]),s._v(" "),t("p",[s._v("如果需要自定义入口文件的名称,就需要通过配置项来完成")]),s._v(" "),t("p",[s._v("添加配置项的方法有两种:")]),s._v(" "),t("h6",{attrs:{id:"通过命令行添加"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过命令行添加"}},[s._v("#")]),s._v(" "),t("strong",[s._v("通过命令行添加")])]),s._v(" "),t("p",[t("code",[s._v("npx webpack --entry ./src/index0.js (entry后面的路径表示需要打包的入口文件)")])]),s._v(" "),t("p",[t("code",[s._v("npx webpack --entry ./src/index0.js --output-path ./build")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635863579200.png",alt:"1635863579200"}})]),s._v(" "),t("p",[s._v("webpack允许我们可以直接利用相应的模块导出具体的配置项：修改package.json来配置一些短命令来简化命令行的使用")]),s._v(" "),t("h6",{attrs:{id:"简化命令行操作修改package-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简化命令行操作修改package-json"}},[s._v("#")]),s._v(" "),t("strong",[s._v("简化命令行操作修改package.json")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635864199731.png",alt:"1635864199731"}})]),s._v(" "),t("h6",{attrs:{id:"通过webpack-config-js配置文件进行添加"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过webpack-config-js配置文件进行添加"}},[s._v("#")]),s._v(" "),t("strong",[s._v("通过webpack.config.js配置文件进行添加")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635865436786.png",alt:"1635865436786"}})]),s._v(" "),t("p",[t("strong",[s._v("output中的输出路径path 必须要设置成绝对路径")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635865411389.png",alt:"1635865411389"}})]),s._v(" "),t("p",[t("strong",[s._v("正确写法")])]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635865928797.png",alt:"1635865928797"}})]),s._v(" "),t("h4",{attrs:{id:"webpack打包过程中的webpack依赖图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack打包过程中的webpack依赖图"}},[s._v("#")]),s._v(" webpack打包过程中的webpack依赖图")]),s._v(" "),t("p",[s._v("简单分析，就是在项目的入口文件当中，1.如果说，想要webpack处理某些模块资源的时候，就应该把这些资源添加到依赖关系当中，这样webpack才能对其进行打包操作")]),s._v(" "),t("p",[s._v("2.第二 如果后期需要自定义配置文件的相关内容，可以在项目根目录下创建自定义配置文件")]),s._v(" "),t("p",[s._v("可以在命令行里面通过 --config  自定义配置文件名 来自己指定当前配置文件的明菜")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635877127932.png",alt:"1635877127932"}})]),s._v(" "),t("h2",{attrs:{id:"webpack配置-路径"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack配置-路径"}},[s._v("#")]),s._v(" webpack配置@路径")]),s._v(" "),t("p",[s._v("修改根目录下的webpack.config.js的配置文件")]),s._v(" "),t("h2",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")]),s._v(" "),t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635308772483.png",alt:"1635308772483"}})]),s._v(" "),t("h1",{attrs:{id:"webpack与前端性能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack与前端性能"}},[s._v("#")]),s._v(" webpack与前端性能")]),s._v(" "),t("h2",{attrs:{id:"webpac性能调优"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpac性能调优"}},[s._v("#")]),s._v(" webpac性能调优")]),s._v(" "),t("h1",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[t("img",{attrs:{src:"C:%5CUsers%5Ctree%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1635945099871.png",alt:"1635945099871"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);